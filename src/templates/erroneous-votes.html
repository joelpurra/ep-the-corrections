<!DOCTYPE html>
<html class="no-js">

{{
    function formatDateString(input) {
        var formatted = new Date(Date.parse(input))
            .toLocaleString("en-US", {
                weekday: "long",
                year: "numeric",
                month: "long",
                day: "numeric",
                timeZoneName: "short"
            });

        return formatted;
    }
}}

{{## def.about:
    <!-- TODO: re-use definitions across template files? -->
    <p>
        <a href="https://github.com/joelpurra/ep-the-corrections">European Parliament: The Corrections (ep-the-corrections)</a> &copy; 2014 <a href="http://joelpurra.com/">Joel Purra</a>.
    </p>
    <ul>
        <li>Data is made available under the <a href="http://opendatacommons.org/licenses/odbl/1.0/">Open Database License 1.0</a>.</li>
        <li>Any rights in individual contents of the database are licensed under the <a href="http://opendatacommons.org/licenses/dbcl/1.0/">Database Contents License 1.0</a>.</li>
        <li>Site content licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</li>
        <li>Code licensed according to terms in each separate project.</li>
    </ul>
    <p>
        Using data on erroneous/corrected votes in <a href="https://github.com/joelpurra/ep-erroneous-votes">ep-erroneous-votes</a>, based on <a href="http://parltrack.euwiki.org/dumps">open data dumps</a>, licensed under the <a href="http://opendatacommons.org/licenses/odbl/">Open Database License</a>, from <a href="http://parltrack.euwiki.org/">Parltrack</a>, to visalize erroneous, and subsequently corrected, votes by <a href="http://www.europarl.europa.eu/meps/">Members</a> of the <a href="http://www.europarl.europa.eu/">European Parliament</a>.
    </p>
    <p>
        Developed during the <a href="http://europarl.me/">Europarl Hackathon</a>, in preparation for the <a href="http://www.elections2014.eu/">European elections 2014</a>.
    </p>
#}}

{{## def.correctors:correctional:
    <td>
        <ul>
            {{? correctional }} {{~ correctional : correction : correctionIndex }} {{? correction.id }}
            <li><a href="http://parltrack.euwiki.org/mep/{{! correction.id }}">{{! correction.orig }}</a>
            </li>
            {{??}}
            <li>{{! correction }}</li>
            {{?}} {{~}} {{?}}
        </ul>
    </td>
#}}

<head lang="en">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
        Corrected votes by the Members of the European Parliament
    </title>
    
    <script>
    (function() {
      try {
        var h = document.getElementsByTagName("html")[0];
        h.className = ("" + h.className).replace("no-js", "js");
      }
      catch(e) {
      }
    }());
    </script>

    <style>
    body {
        padding-left: 10%;
        padding-right: 10%;
    }
    header {
        margin-top: 2em;
        margin-bottom: 5em;
    }
    footer {
        margin-top: 5em;
        margin-bottom: 2em;
    }
    h2 time {
        font-size: small;
    }
    table {
        width: 100%;
    }
    table col:nth-of-type(odd) {
        background-color: #f6f6f6;
    }
    table col:nth-of-type(even) {
        background-color: #f0f0f0;
    }
    table td, table th {
        vertical-align: top;
        margin: 0;
    }
    table td.number {
        text-align: right;
    }
    ul.no-bullets li, ol.no-bullets li {
        list-style-type: none;
    }
    html.no-js .js-only {
        display: none;
    }
    html.js .no-js-only {
        display: none;
    }
    </style>

    <style>
    table.votes col {
        width: 26.6667%;
    }
    table.votes col:first-of-type, table.votes col:last-of-type {
        width: 10%;
    }
    .voting .voting-anchor-placeholder {
        visibility: hidden;
    }
    .voting .voting-anchor-link {
        visibility: hidden;
        text-decoration: none;
    }
    .voting:hover .voting-anchor-link {
        visibility: visible;
    }
    </style>
</head>

<body>
    <header>
        <h1>
            Corrected votes by the Members of the European Parliament
        </h1>

        {{# def.about }}
        <hr />
    </header>

    {{~ it : voting : votingIndex }}
    <article id="{{! voting.dossierid }}" class="voting">
        <h2>
            {{? voting.dossierid }}
            <a href="#{{! voting.dossierid }}" class="voting-anchor-link">∞</a>
            <a href="http://parltrack.euwiki.org/dossier/{{! voting.dossierid }}">{{! voting.title }}</a>
            {{??}}
            <span class="voting-anchor-placeholder">∞</span>
            {{! voting.title }} {{?}}
            <time datetime="{{! voting.ts }}">{{! formatDateString(voting.ts) }}</time>
        </h2>

        <table class="votes">
            <caption>Votes recorded for {{? voting.dossierid }}
                <a href="http://parltrack.euwiki.org/dossier/{{! voting.dossierid }}">{{! voting.title }}</a>
                {{??}} {{! voting.title }} {{?}} at
                <time datetime="{{! voting.ts }}">{{! formatDateString(voting.ts) }}</time>
            </caption>
            <colgroup>
                <col></col>
                <col></col>
                <col></col>
                <col></col>
                <col></col>
            </colgroup>
            <thead>
                <tr>
                    <th>Votes</th>
                    <th scope="col">For</th>
                    <th scope="col">Abstain</th>
                    <th scope="col">Against</th>
                    <th scope="col">Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">Total count</th>
                    <td>{{! voting.for.total }}</td>
                    <td>{{! voting.abstain.total }}</td>
                    <td>{{! voting.against.total }}</td>
                    <td>{{! (voting.for.total + voting.abstain.total + voting.against.total) }}</td>
                </tr>
                <tr>
                    <th scope="row">Corrected count</th>
                    <td>{{! (voting.for.correctional ? voting.for.correctional.length : 0) }}</td>
                    <td>{{! (voting.abstain.correctional ? voting.abstain.correctional.length : 0) }}</td>
                    <td>{{! (voting.against.correctional ? voting.against.correctional.length : 0) }}</td>
                    <td>{{! ((voting.for.correctional ? voting.for.correctional.length : 0) + (voting.abstain.correctional ? voting.abstain.correctional.length : 0) + (voting.against.correctional ? voting.against.correctional.length : 0)) }}</td>
                </tr>
                <tr>
                    <th scope="row">Correctors</th>
                    {{# def.correctors:voting.for.correctional }}
                    {{# def.correctors:voting.abstain.correctional }}
                    {{# def.correctors:voting.against.correctional }}
                    <td></td>
                </tr>
            </tbody>
        </table>
    </article>
    {{~}}
    <footer>
        <hr />
        {{# def.about }}
    </footer>
</body>

</html>